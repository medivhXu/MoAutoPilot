# MoAutoPilot

MoAutoPilot æ˜¯ä¸€ä¸ªåŸºäº Appium çš„ç§»åŠ¨ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒ Androidã€iOS å’Œ HarmonyOS å¹³å°ï¼Œå¹¶é›†æˆäº† AI é©±åŠ¨çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆèƒ½åŠ›ã€‚

## âœ¨ ç‰¹æ€§

- ğŸŒˆ å¤šå¹³å°æ”¯æŒ
  - Android è®¾å¤‡å’Œæ¨¡æ‹Ÿå™¨
  - iOS è®¾å¤‡å’Œæ¨¡æ‹Ÿå™¨
  - HarmonyOS è®¾å¤‡
- ğŸ¯ æ™ºèƒ½åŒ–æµ‹è¯•
  - æ™ºèƒ½å…ƒç´ å®šä½
  - è‡ªåŠ¨ç­‰å¾…å’Œé‡è¯•
  - è‡ªåŠ¨å¤„ç†æƒé™å¼¹çª—
- ğŸ”„ å¹¶è¡Œæµ‹è¯•
  - å¤šè®¾å¤‡å¹¶è¡Œæ‰§è¡Œ
  - å¤±è´¥é‡è¯•æœºåˆ¶
  - ç”¨ä¾‹ä¼˜å…ˆçº§ç®¡ç†
- ğŸ“Š æµ‹è¯•æŠ¥å‘Š
  - HTML æ ¼å¼æŠ¥å‘Š
  - å¤±è´¥åœºæ™¯æˆªå›¾
  - è¯¦ç»†æ‰§è¡Œæ—¥å¿—
- ğŸ¤– AI é©±åŠ¨æµ‹è¯•
  - åŸºäº LLM çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
  - æ™ºèƒ½ UI åˆ†æå’Œäº¤äº’
  - è‡ªé€‚åº”æµ‹è¯•ç­–ç•¥

## ğŸ” ä¸å…¶ä»–è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„åŒºåˆ«

MoAutoPilot åœ¨ä¼ ç»Ÿç§»åŠ¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¤šé¡¹åˆ›æ–°ï¼š

| ç‰¹æ€§ | MoAutoPilot | ä¼ ç»Ÿè‡ªåŠ¨åŒ–æ¡†æ¶ |
|------|------------|---------------|
| **æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ** | AI é©±åŠ¨è‡ªåŠ¨ç”Ÿæˆ | æ‰‹åŠ¨ç¼–å†™ |
| **å…ƒç´ å®šä½** | æ™ºèƒ½å®šä½ï¼Œå¤šç­–ç•¥è‡ªåŠ¨åˆ‡æ¢ | å›ºå®šå®šä½ç­–ç•¥ |
| **å¹³å°æ”¯æŒ** | Androidã€iOSã€HarmonyOS | é€šå¸¸ä»…æ”¯æŒ Android å’Œ iOS |
| **æµ‹è¯•ç­–ç•¥** | è‡ªé€‚åº”æµ‹è¯•ç­–ç•¥ï¼ŒåŸºäº AI åˆ†æ | å›ºå®šæµ‹è¯•ç­–ç•¥ |
| **ç»´æŠ¤æˆæœ¬** | ä½ï¼ˆè‡ªåŠ¨é€‚åº” UI å˜åŒ–ï¼‰ | é«˜ï¼ˆUI å˜åŒ–éœ€æ‰‹åŠ¨æ›´æ–°ï¼‰ |
| **æµ‹è¯•è¦†ç›–ç‡** | é«˜ï¼ˆAI å¯æ¢ç´¢è¾¹ç¼˜åœºæ™¯ï¼‰ | ä¸­ï¼ˆä»…è¦†ç›–é¢„å®šä¹‰åœºæ™¯ï¼‰ |
| **æ‰§è¡Œæ•ˆç‡** | é«˜ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼Œæ™ºèƒ½é‡è¯•ï¼‰ | ä¸­ï¼ˆå¸¸è§„æ‰§è¡Œç­–ç•¥ï¼‰ |

### æ ¸å¿ƒä¼˜åŠ¿

1. **AI é©±åŠ¨çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ**ï¼šæ— éœ€æ‰‹åŠ¨ç¼–å†™å¤§é‡æµ‹è¯•ç”¨ä¾‹ï¼ŒAI å¯åŸºäºåº”ç”¨æè¿°è‡ªåŠ¨ç”Ÿæˆå…¨é¢çš„æµ‹è¯•åœºæ™¯
2. **æ™ºèƒ½ UI åˆ†æ**ï¼šè‡ªåŠ¨åˆ†æåº”ç”¨ç•Œé¢ç»“æ„ï¼Œè¯†åˆ«å…³é”®äº¤äº’å…ƒç´ 
3. **è·¨å¹³å°å…¼å®¹æ€§**ï¼šä¸€å¥—æ¡†æ¶åŒæ—¶æ”¯æŒä¸‰å¤§ç§»åŠ¨å¹³å°ï¼ŒåŒ…æ‹¬æ–°å…´çš„é¸¿è’™ç³»ç»Ÿ
4. **è‡ªé€‚åº”æµ‹è¯•æ‰§è¡Œ**ï¼šæ ¹æ®æµ‹è¯•ç»“æœåŠ¨æ€è°ƒæ•´æµ‹è¯•ç­–ç•¥ï¼Œæé«˜æµ‹è¯•æ•ˆç‡
5. **ä½ç»´æŠ¤æˆæœ¬**ï¼šè‡ªåŠ¨é€‚åº” UI å˜åŒ–ï¼Œå‡å°‘ç»´æŠ¤å·¥ä½œé‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 18/20
- Java JDK 8
- Android SDK (Android æµ‹è¯•)
- Xcode (iOS æµ‹è¯•)
- Appium 2.0+
- Ollama (AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ)

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–
```bash
git clone https://github.com/yourusername/MoAutoPilot.git
cd MoAutoPilot
python -m venv venv
source venv/bin/activate  # macOS/Linux
# æˆ–
.\venv\Scripts\activate   # Windows
pip install -r requirements.txt
```

2. å®‰è£… Ollamaï¼ˆç”¨äº AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼‰
```bash
# macOS
curl -fsSL https://ollama.com/install.sh | sh

# Linux
curl -fsSL https://ollama.com/install.sh | sh

# Windows
# ä» https://ollama.com/download ä¸‹è½½å®‰è£…åŒ…
```

3. ä¸‹è½½ LLM æ¨¡å‹ï¼ˆæ¨èä½¿ç”¨ deepseek ç³»åˆ—æ¨¡å‹ï¼‰
```bash
ollama pull deepseek-r1:8b
# æˆ–ä½¿ç”¨æ›´å¤§å‚æ•°çš„æ¨¡å‹ä»¥è·å¾—æ›´å¥½æ•ˆæœ
ollama pull deepseek-r1:14b
```

4. é…ç½®æµ‹è¯•ç¯å¢ƒ
```bash
# æ£€æŸ¥ç¯å¢ƒé…ç½®
python -m pytest tests/test_environment.py -v -s
```

5. é…ç½®è®¾å¤‡ä¿¡æ¯
```yaml
# config/config.yaml
devices:
  android:
    - deviceName: "Pixel_4"
      platformVersion: "11.0"
      app: "~/apps/demo.apk"

  ios:
    - deviceName: "iPhone 12"
      platformVersion: "14.5"
      app: "~/apps/demo.ipa"

  harmony:
    - platformName: HarmonyOS
      deviceName: Harmony Device
      platformVersion: '2.0'
      automationName: UiAutomator2
      appPackage: com.example.harmonyapp
      appActivity: .MainActivity
      noReset: true
```

## ğŸ¤– AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ

MoAutoPilot é›†æˆäº†åŸºäºå¤§å‹è¯­è¨€æ¨¡å‹çš„æµ‹è¯•ç”¨ä¾‹ç”ŸæˆåŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨æè¿°è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚

### é…ç½® AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ

1. ç¡®ä¿ Ollama æœåŠ¡å·²å¯åŠ¨
```bash
# æ£€æŸ¥ Ollama æœåŠ¡çŠ¶æ€
curl http://localhost:11434/api/tags
```

2. å‡†å¤‡æµ‹è¯•ç”¨ä¾‹æè¿°æ–‡ä»¶

åœ¨ `test_cases_source` ç›®å½•ä¸‹åˆ›å»º Markdown æ–‡ä»¶ï¼Œæè¿°åº”ç”¨åŠŸèƒ½å’Œæµ‹è¯•éœ€æ±‚ï¼š

```markdown
# çŸ­è§†é¢‘åº”ç”¨æµ‹è¯•éœ€æ±‚

## åŠŸèƒ½æè¿°
çŸ­è§†é¢‘åº”ç”¨å…è®¸ç”¨æˆ·æµè§ˆã€ä¸Šä¼ ã€ç¼–è¾‘å’Œåˆ†äº«çŸ­è§†é¢‘å†…å®¹ã€‚

## æµ‹è¯•èŒƒå›´
- è§†é¢‘æµè§ˆåŠŸèƒ½
- è§†é¢‘ä¸Šä¼ åŠŸèƒ½
- ç”¨æˆ·äº’åŠ¨åŠŸèƒ½ï¼ˆç‚¹èµã€è¯„è®ºã€åˆ†äº«ï¼‰
- è´¦æˆ·ç®¡ç†åŠŸèƒ½
```

### ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹

è¿è¡Œæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆè„šæœ¬ï¼š

```bash
python -m pytest test_cases/test_automation.py::TestAutomation::load_test_cases_from_source -v -s
```

ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å°†ä¿å­˜åœ¨ `gen_cases` ç›®å½•ä¸‹ï¼Œæ ¼å¼ä¸º JSON æˆ– Markdownã€‚

### è‡ªå®šä¹‰ AI æç¤ºæ¨¡æ¿

æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ AI æç¤ºæ¨¡æ¿ï¼Œä»¥ç”Ÿæˆæ›´ç¬¦åˆç‰¹å®šéœ€æ±‚çš„æµ‹è¯•ç”¨ä¾‹ï¼š

```python
# åœ¨ test_automation.py ä¸­ä¿®æ”¹ prompt æ¨¡æ¿
prompt = f"""ä½ æ˜¯ä¸€ä¸ªä¸“æ³¨ç§»åŠ¨APPæµ‹è¯•çš„ä¸“å®¶ï¼Œè¯·é’ˆå¯¹{åº”ç”¨ç±»å‹}APPç‰¹æ€§ç”Ÿæˆç”¨ä¾‹ï¼ŒæŒ‰JSONæ ¼å¼è¾“å‡ºï¼š\
            {content}
            è¦æ±‚åŒ…å«ï¼šæµ‹è¯•æ­¥éª¤ã€é¢„æœŸç»“æœã€ä¼˜å…ˆçº§ã€‚
            ç‰¹åˆ«æ³¨æ„ï¼š
                1. {ç‰¹å®šå…³æ³¨ç‚¹1}
                2. {ç‰¹å®šå…³æ³¨ç‚¹2}
                3. {ç‰¹å®šå…³æ³¨ç‚¹3}"""
```

### ä½¿ç”¨ LangChain æ¡†æ¶ï¼ˆå¯é€‰ï¼‰

MoAutoPilot ä¹Ÿæ”¯æŒä½¿ç”¨ LangChain æ¡†æ¶è¿›è¡Œæ›´çµæ´»çš„ AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼š

```python
from langchain.prompts import PromptTemplate
from langchain_community.llms import Ollama

template = """ä½œä¸ºèµ„æ·±æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œè¯·ä¸º{feature}ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼š
1. åŒ…å«{normal_count}ä¸ªæ­£å¸¸åœºæ™¯å’Œ{error_count}ä¸ªå¼‚å¸¸åœºæ™¯
2. æ¯ä¸ªç”¨ä¾‹éœ€æœ‰æ˜ç¡®çš„å‰ç½®æ¡ä»¶
3. è¾“å‡ºMarkdownè¡¨æ ¼æ ¼å¼"""

prompt = PromptTemplate.from_template(template)
llm = Ollama(model="deepseek-r1:14b", temperature=0.5)

chain = prompt | llm
response = chain.invoke({
    "feature": "æŠ–éŸ³è§†é¢‘ä¸Šä¼ åŠŸèƒ½",
    "normal_count": 3,
    "error_count": 2
})
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### æµ‹è¯•ç”¨ä¾‹ç¼–å†™

```python
from utils.appium_driver import AppiumDriver
from pages.login_page import LoginPage

def test_login():
    # åˆå§‹åŒ–é©±åŠ¨
    driver = AppiumDriver(platform='android')
    
    # æ‰§è¡Œç™»å½•æ“ä½œ
    login_page = LoginPage(driver)
    login_page.login("username", "password")
    
    # éªŒè¯ç»“æœ
    assert login_page.is_login_successful()
```

### é¡µé¢å¯¹è±¡å®šä¹‰

```python
from utils.base_page import BasePage

class LoginPage(BasePage):
    # é¡µé¢å…ƒç´ 
    username_input = "id=username"
    password_input = "id=password"
    login_button = "id=login"
    
    def login(self, username, password):
        self.input_text(self.username_input, username)
        self.input_text(self.password_input, password)
        self.click(self.login_button)
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå•ä¸ªæµ‹è¯•
pytest test_cases/test_automation.py -v -s

# å¹¶è¡Œæµ‹è¯•
pytest test_cases/ -n auto

# ç”ŸæˆæŠ¥å‘Š
pytest test_cases/ --html=report.html
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ MIT åè®® - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## é¸¿è’™ç³»ç»Ÿæ”¯æŒ

MoAutoPilot æ”¯æŒ HarmonyOS è®¾å¤‡çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚è¦æµ‹è¯•é¸¿è’™è®¾å¤‡ï¼Œè¯·ç¡®ä¿ï¼š

1. è®¾å¤‡å·²å¼€å¯å¼€å‘è€…æ¨¡å¼
2. å·²å®‰è£…å¿…è¦çš„é©±åŠ¨
3. åœ¨ `config/config.yaml` ä¸­é…ç½®é¸¿è’™è®¾å¤‡ä¿¡æ¯

ç¤ºä¾‹é…ç½®ï¼š
```yaml
harmony:
  platformName: HarmonyOS
  deviceName: Harmony Device
  platformVersion: '2.0'
  automationName: UiAutomator2
  appPackage: com.example.harmonyapp
  appActivity: .MainActivity
  noReset: true
```

è¿è¡Œæµ‹è¯•æ—¶ï¼Œè¯·è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export TEST_PLATFORM=harmony
pytest test_cases/test_automation.py
```